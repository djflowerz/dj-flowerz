<nav class="navbar navbar-expand-lg fixed-top navbar-dark navbar-custom" id="mainNav" style="">
  <div class="container">
    <a class="navbar-brand" href="#page-top" style="color: yellowgreen; margin-top: -4px">RentPesa</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarResponsive"
            aria-controls="navbarResponsive"
            aria-expanded="false" aria-label="Toggle navigation"
            (click)="toggleNavbar()">
      <span style="color: white" class="fa fa-bars" ></span></button>
    <div *ngIf="navTag == 'default'" class="collapse navbar-collapse" id="navbarResponsive"
         [ngClass]="{ 'show': navbarOpen, 'margin-top': margin === 0 ? 'default' : 'top'}">

      <ul class="navbar-nav me-auto mb-2 mb-lg-0" style="margin-top: -5px">
        <li class="nav-item" >
          <a class="nav-link" href="#topCategories" (click)="hideNav()">Top Categories</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#trendingProperties" (click)="hideNav()">Trending Properties</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#contactUs" (click)="hideNav()">Contact Us</a>
        </li>

      </ul>
      <ul class="navbar-nav">
        <li class="nav-item" style="margin-right: 20px">
          <button class="btn btn-outline-warning btn-sm" style="margin-top: 3px" (click)="explore()">Explore</button>
        </li>
        <li *ngIf="!isLogin" class="rd-nav-item nav-item" style="text-transform: none; cursor: pointer; margin-top: 8px; " (click)="openModal(signInRegisterContent)" >
          <a class="nav-link" style="text-transform: none; color: white; padding: 0;"><span class="fa fa-user-o" style="padding-right: 10px; color: white"></span>Sign In</a>
        </li>
        <li *ngIf="isLogin" class="rd-nav-item nav-item" style=" text-transform: none; cursor: pointer">
          <button mat-button [matMenuTriggerFor]="menu" style="color: white;  padding: 0; "><span class="fa fa-user-o" style="padding-right: 10px; color: white"></span>{{myEmail}}</button>
          <mat-menu class="custom-menu" #menu="matMenu">
            <button mat-menu-item routerLink="/dashboard">My Account</button>
            <button mat-menu-item (click)="logOut()">Log Out</button>
          </mat-menu>
        </li>
      </ul>
    </div>
  </div>
</nav>

<ng-template #signInRegisterContent let-modal>
  <div mat-dialog-title class="dialog-title" style="margin: 0 !important; padding: 0 !important;">
    <h2 style="margin: 0 !important; padding: 0 !important;"> </h2>
    <button mat-icon-button aria-label="close dialog" (click)="closeModal()" style="border:none !important; background: white;">
      <i class="fa fa-close" style="border:none !important;"></i>
    </button>
  </div>
  <mat-dialog-content>
    <mat-tab-group mat-stretch-tabs [dynamicHeight]="true" animationDuration="0ms" [selectedIndex]="tabIndex$ | async">
      <mat-tab label="Sign In" style="font-weight: bold">
        <div class="modal-body" style="margin-top: 10px">
          <form #signInForm="ngForm">
            <div class="mb-3">
              <div class="form-floating mb-3">
                <input name="loginemail" type="text" class="form-control" id="formGroupExampleInput33"
                       #loginemail="ngModel"
                       [class.is-invalid]="loginemail.invalid && loginemail.touched" ngModel required>
                <label  for="formGroupExampleInput3" style="font-size: 13px; color: #666; font-family: 'Work Sans', sans-serif">Email Address</label>
              </div>
            </div>
            <div class="mb-3">
              <div class="form-floating mb-3">
                <input name="loginpassword" type="password" class="form-control" id="formGroupExampleInput3"
                       #loginpassword="ngModel"
                       [class.is-invalid]="loginpassword.invalid && loginpassword.touched" ngModel required>
                <label  for="formGroupExampleInput3" style="font-size: 13px; color: #666; font-family: 'Work Sans', sans-serif">Password</label>
              </div>
            </div>
            <div class="mb-3">
              <button (click)="login(signInForm)" [disabled]="signInForm.form.invalid" type="button" class="btn btn-danger w-100">Login</button>
            </div>

            <div class="mb-3">
              <h6 style="cursor: pointer; text-transform: none; color: blue; font-size: 14px" (click)="openModal2(forgotPasswordContent)">Forgot Password?</h6>
            </div>
            <!--<div class="mb-3">
              <button style="font-size: 14px; font-weight: bold" type="button" class="btn btn-outline-primary w-100"><span class="fa fa-google" style="margin-right: 10px"></span>Continue With Google</button>
            </div>
            <div class="mb-3">
              <button style="font-size: 14px; font-weight: bold" type="button" class="btn btn-outline-success w-100"><span class="fa fa-apple" style="margin-right: 10px;"></span>Continue With Apple</button>
            </div>-->
          </form>
        </div>
      </mat-tab>
      <mat-tab label="Register">
        <div class="modal-body" style="margin-top: 10px">
          <form #signUpForm="ngForm">
            <div class="mb-3">
              <div class="form-floating mb-3">
                <input name="regname" type="text" class="form-control"
                       #regname="ngModel"
                       [class.is-invalid]="regname.invalid && regname.touched" ngModel required>
                <label  for="formGroupExampleInput3" style="font-size: 13px; color: #666; font-family: 'Work Sans', sans-serif">Name</label>
              </div>
            </div>
            <div class="mb-3">
              <div class="form-floating mb-3">
                <input name="regemail" type="email" class="form-control"
                       #regemail="ngModel"
                       [class.is-invalid]="regemail.invalid && regemail.touched" ngModel required>
                <label  for="formGroupExampleInput3" style="font-size: 13px; color: #666; font-family: 'Work Sans', sans-serif">Email Address</label>
              </div>
            </div>
            <div class="mb-3">
              <div class="form-floating mb-3">
                <input name="regphone" type="text" class="form-control"
                       #regphone="ngModel"
                       [class.is-invalid]="regphone.invalid && regphone.touched" ngModel required>
                <label  for="formGroupExampleInput3" style="font-size: 13px; color: #666; font-family: 'Work Sans', sans-serif">Phone Number</label>
              </div>
            </div>
            <div class="mb-3">
              <div class="form-floating mb-3">
                <input name="regpassword" type="password" class="form-control"
                       #regpassword="ngModel"
                       [class.is-invalid]="regpassword.invalid && regpassword.touched" ngModel required>
                <label  for="formGroupExampleInput3" style="font-size: 13px; color: #666; font-family: 'Work Sans', sans-serif">Password</label>
              </div>
            </div>
            <div class="mb-3">
              <div class="form-floating mb-3">
                <input name="regconfirmpassword" type="password" class="form-control"
                       #regconfirmpassword="ngModel"
                       [class.is-invalid]="regconfirmpassword.invalid && regconfirmpassword.touched" ngModel required>
                <label  for="formGroupExampleInput3" style="font-size: 13px; color: #666; font-family: 'Work Sans', sans-serif">Confirm Password</label>
              </div>
            </div>
            <div class="mb-3">
              <button (click)="register(signUpForm)" [disabled]="signUpForm.form.invalid" type="button" class="btn btn-danger w-100">Sign Up</button>
            </div>
            <!--<div class="mb-3">
              <h6 class=" text-uppercase">Alternative Sign Up Options</h6>
            </div>
            <div class="mb-3">
              <button  style="font-size: 14px; font-weight: bold" type="button" class="btn btn-outline-primary w-100"><span class="fa fa-google" style="margin-right: 10px"></span>Continue With Google</button>
            </div>
            <div class="mb-3">
              <button style="font-size: 14px; font-weight: bold" type="button" class="btn btn-outline-success w-100"><span class="fa fa-apple" style="margin-right: 10px"></span>Continue With Apple</button>
            </div>-->
          </form>
        </div>
      </mat-tab>
    </mat-tab-group>
  </mat-dialog-content>

</ng-template>
<ng-template #forgotPasswordContent let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Forgot Password</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body">
    <form #recoverPasswordForm="ngForm">
      <div class="mb-3">
        <div class="form-floating mb-3">
          <input name="recemail" type="text" class="form-control" id="recemail"
                 #recemail="ngModel" ngModel
                 [class.is-invalid]="recemail.invalid && recemail.touched"required>
          <label>Enter you email address</label>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" [disabled]="recoverPasswordForm.form.invalid" (click)="recoverPassword(recoverPasswordForm)" >Submit</button>
  </div>
</ng-template>
